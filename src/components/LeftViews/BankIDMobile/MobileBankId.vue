<template>
<div class=" bg-views p-4 rounded-4 mb-3">

    <img :src="AMVLogo" class="logo-top" />

    <h2>{{ t('loginWithMobileBankID') }}</h2>
    <p class="mb-5">{{ t('scanQRCode') }}</p>

    <!-- QR -->
    <div class="qr-wrapper mb-5">
      <div class="fake-qr"></div>
    </div>

    


<!-- Step indicator with Bootstrap icons, using text-success for active step and text-secondary for inactive steps. -->
<div class="d-none d-md-flex w-100 justify-content-center align-items-center gap-2 mb-3">
    <svg width="131" height="25" viewBox="0 0 131 25" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="118.87" cy="12.1296" r="12.1296" fill="#ADB2A3"/>
      <path d="M118.666 11.1711C118.927 11.1805 119.189 11.1618 119.45 11.1151C119.711 11.0685 119.945 10.9891 120.15 10.8771C120.355 10.7558 120.519 10.5925 120.64 10.3871C120.771 10.1818 120.836 9.9298 120.836 9.63113C120.836 9.21113 120.691 8.87513 120.402 8.62313C120.122 8.37113 119.758 8.24513 119.31 8.24513C119.03 8.24513 118.787 8.30113 118.582 8.41313C118.377 8.52513 118.204 8.67913 118.064 8.87513C117.933 9.0618 117.835 9.27647 117.77 9.51913C117.705 9.75247 117.677 9.99513 117.686 10.2471H116.09C116.109 9.77113 116.197 9.33247 116.356 8.93113C116.515 8.52047 116.729 8.1658 117 7.86713C117.28 7.56847 117.616 7.33513 118.008 7.16713C118.4 6.99913 118.843 6.91513 119.338 6.91513C119.721 6.91513 120.094 6.97113 120.458 7.08313C120.831 7.19513 121.163 7.35847 121.452 7.57313C121.751 7.7878 121.989 8.06313 122.166 8.39913C122.343 8.7258 122.432 9.1038 122.432 9.53313C122.432 10.0278 122.32 10.4618 122.096 10.8351C121.872 11.1991 121.522 11.4651 121.046 11.6331V11.6611C121.606 11.7731 122.04 12.0531 122.348 12.5011C122.665 12.9398 122.824 13.4765 122.824 14.1111C122.824 14.5778 122.731 14.9978 122.544 15.3711C122.357 15.7351 122.105 16.0478 121.788 16.3091C121.471 16.5611 121.102 16.7571 120.682 16.8971C120.262 17.0371 119.819 17.1071 119.352 17.1071C118.783 17.1071 118.283 17.0278 117.854 16.8691C117.434 16.7011 117.079 16.4678 116.79 16.1691C116.51 15.8705 116.295 15.5111 116.146 15.0911C115.997 14.6711 115.917 14.2045 115.908 13.6911H117.504C117.485 14.2885 117.63 14.7878 117.938 15.1891C118.255 15.5811 118.727 15.7771 119.352 15.7771C119.884 15.7771 120.327 15.6278 120.682 15.3291C121.046 15.0211 121.228 14.5871 121.228 14.0271C121.228 13.6445 121.153 13.3411 121.004 13.1171C120.855 12.8931 120.659 12.7251 120.416 12.6131C120.173 12.4918 119.898 12.4171 119.59 12.3891C119.291 12.3611 118.983 12.3518 118.666 12.3611V11.1711Z" fill="#E0E0E0"/>
      <mask id="mask0_419_1168" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="83" y="3" width="18" height="19">
      <rect x="100.918" y="3.88159" width="17.4667" height="17.4667" transform="rotate(89.7856 100.918 3.88159)" fill="#D9D9D9"/>
      </mask>
      <g mask="url(#mask0_419_1168)">
      <path d="M96.7094 11.9032L93.3673 8.56788L94.3824 7.54519L99.4959 12.6205L94.4205 17.734L93.3796 16.719L96.7149 13.3587L91.4931 13.3783L91.4876 11.9227L96.7094 11.9032ZM87.8488 11.9363L90.0321 11.9282L90.0375 13.3837L87.8542 13.3919L87.8488 11.9363ZM84.9377 11.9472L86.3932 11.9418L86.3987 13.3973L84.9431 13.4028L84.9377 11.9472Z" fill="#918D8D"/>
      </g>
      <circle cx="65.5" cy="12.1296" r="12.1296" fill="#ADB2A3"/>
      <path d="M69.3418 16.9111H62.6498C62.6591 16.0991 62.8551 15.3898 63.2378 14.7831C63.6204 14.1765 64.1431 13.6491 64.8058 13.2011C65.1231 12.9678 65.4544 12.7438 65.7998 12.5291C66.1451 12.3051 66.4624 12.0671 66.7518 11.8151C67.0411 11.5631 67.2791 11.2925 67.4658 11.0031C67.6524 10.7045 67.7504 10.3638 67.7598 9.98113C67.7598 9.8038 67.7364 9.61713 67.6898 9.42113C67.6524 9.2158 67.5731 9.02913 67.4518 8.86113C67.3304 8.6838 67.1624 8.53913 66.9478 8.42713C66.7331 8.3058 66.4531 8.24513 66.1078 8.24513C65.7904 8.24513 65.5244 8.31047 65.3098 8.44113C65.1044 8.56247 64.9364 8.73513 64.8058 8.95913C64.6844 9.1738 64.5911 9.43047 64.5258 9.72913C64.4698 10.0278 64.4371 10.3498 64.4278 10.6951H62.8318C62.8318 10.1538 62.9018 9.65447 63.0418 9.19713C63.1911 8.73047 63.4104 8.32913 63.6998 7.99313C63.9891 7.65713 64.3391 7.3958 64.7498 7.20913C65.1698 7.01313 65.6551 6.91513 66.2058 6.91513C66.8031 6.91513 67.3024 7.01313 67.7038 7.20913C68.1051 7.40513 68.4271 7.65247 68.6698 7.95113C68.9218 8.2498 69.0991 8.57647 69.2018 8.93113C69.3044 9.27647 69.3558 9.6078 69.3558 9.92513C69.3558 10.3171 69.2951 10.6718 69.1738 10.9891C69.0524 11.3065 68.8891 11.6005 68.6838 11.8711C68.4784 12.1325 68.2451 12.3751 67.9838 12.5991C67.7224 12.8231 67.4518 13.0331 67.1718 13.2291C66.8918 13.4251 66.6118 13.6118 66.3318 13.7891C66.0518 13.9665 65.7904 14.1438 65.5478 14.3211C65.3144 14.4985 65.1091 14.6851 64.9318 14.8811C64.7544 15.0678 64.6331 15.2685 64.5678 15.4831H69.3418V16.9111Z" fill="#E0E0E0"/>
      <mask id="mask1_419_1168" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="30" y="3" width="18" height="19">
      <rect x="47.5479" y="3.86694" width="17.4667" height="17.4667" transform="rotate(89.7856 47.5479 3.86694)" fill="#D9D9D9"/>
      </mask>
      <g mask="url(#mask1_419_1168)">
      <path d="M43.3387 11.8885L39.9966 8.55323L41.0117 7.53054L46.1251 12.6059L41.0498 17.7194L40.0089 16.7044L43.3441 13.3441L38.1224 13.3636L38.1169 11.9081L43.3387 11.8885ZM34.4781 11.9217L36.6614 11.9135L36.6668 13.3691L34.4835 13.3772L34.4781 11.9217ZM31.567 11.9326L33.0225 11.9271L33.028 13.3827L31.5724 13.3881L31.567 11.9326Z" fill="#918D8D"/>
      </g>
      <circle cx="12.1296" cy="12.1296" r="12.1296" fill="#7B9B3F"/>
      <path d="M9.47528 8.73513C9.81128 8.73513 10.1379 8.70713 10.4553 8.65113C10.7726 8.59513 11.0573 8.5018 11.3093 8.37113C11.5706 8.24047 11.7899 8.07247 11.9673 7.86713C12.1539 7.6618 12.2753 7.4098 12.3313 7.11113H13.6333V16.9111H11.8833V9.99513H9.47528V8.73513Z" fill="white"/>
    </svg>
</div>

<!-- Links -->
<div class="d-flex justify-content-between align-items-center mt-3">
  <BackLink
    :label="t('back')"
    @click="goToBankIdDevice"
  />

  <BankIdLink
    :label="t('aboutMobileBankID')"
  />
</div>

        <!-- Divider med streck -->
    <div class="d-flex align-items-center my-3">
      <hr class="flex-grow-1">
      <span class="px-2 small">{{ t('or') }}</span>
      <hr class="flex-grow-1">
    </div>

    <button
      @click="$emit('change-view','bankiddevice')"
      class="btn-custom btn-custom d-flex align-items-center justify-content-start gap-2 mb-3"
    >
      <img :src="bankIdLogo" class="bankid-icon"/>
      {{ t('bankIDThisDevice') }}
    </button>

<!-- ðŸ”¹ TillfÃ¤llig knapp fÃ¶r test -->
    <button
      @click="simulatePending"
      class="btn-temp"
    >
      Simulera lyckad inloggning
    </button>

  </div>
</template>

<script setup lang="ts">
import { useI18n } from '../../../i18n/useI18n'
import bankIdLogo from '../../../assets/BankID_logo_white.png'
import BackLink from '../../common/BackLink.vue'
import BankIdLink from '../../common/BankIdLink.vue'
import AMVLogo from '../../../assets/logo_horizontal.svg'

const { t } = useI18n()

type ViewType = 
| 'login'
| 'bankiddevice'
| 'mobilebankidpending'

const emit = defineEmits<{
  (e: 'change-view', view: ViewType): void}>()

  const goToLogin = () => {
    emit ('change-view', 'login')
  }

  const goToBankIdDevice = () => {
    emit ('change-view', 'bankiddevice')
  }

  const simulatePending = () => {
    emit('change-view', 'mobilebankidpending')
  }
</script>